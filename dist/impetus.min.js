!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=.04,i=.11,u=function e(t){function u(){M.call(L,G,H)}function c(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function s(e){Z=(new Date).getTime();var t=c(e);N||O||(N=!0,Q=!1,z=t.id,R=V=t.x,U=k=t.y,W=[],f(R,U),document.addEventListener("touchmove",d),document.addEventListener("touchend",m),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",d),document.addEventListener("mouseup",m))}function d(e){e.preventDefault();var t=c(e);N&&t.id===z&&(V=t.x,k=t.y,f(R,U),p())}function a(){var e=W[0],t=W[W.length-1];return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function m(e){var t=c(e);(new Date).getTime()-Z<=$&&a()<10&&(N=!1,document.removeEventListener("touchmove",d),document.removeEventListener("touchend",m),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",m),document.removeEventListener("mousemove",d)),N&&t.id===z&&v()}function v(){N=!1,f(R,U),x(),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",m),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",m),document.removeEventListener("mousemove",d)}function f(e,t){for(var n=Date.now();W.length>0&&!(n-W[0].time<=100);)W.shift();W.push({x:e,y:t,time:n})}function h(){var e=V-R,t=k-U;if(G+=e*g,H+=t*g,I){var n=y();0!==n.x&&(G-=e*l(n.x)*g),0!==n.y&&(H-=t*l(n.y)*g)}else y(!0);u(),R=V,U=k,K=!1}function l(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function p(){K||r(h),K=!0}function y(e){var t=0,n=0;return void 0!==S&&G<S?t=S-G:void 0!==X&&G>X&&(t=X-G),void 0!==Y&&H<Y?n=Y-H:void 0!==P&&H>P&&(n=P-H),e&&(0!==t&&(G=t>0?S:X),0!==n&&(H=n>0?Y:P)),{x:t,y:n,inBounds:0===t&&0===n}}function x(){var e=W[0],t=W[W.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/g;C=n/u||0,j=o/u||0;var c=y();Math.abs(C)>1||Math.abs(j)>1||!c.inBounds?(Q=!0,r(E)):L.dispatchEvent(new Event("momentumend"))}function E(){if(Q){C*=q,j*=q,G+=C,H+=j;var e=y();if(Math.abs(C)>J||Math.abs(j)>J||!e.inBounds){if(I){if(0!==e.x)if(e.x*C<=0)C+=e.x*o;else{var t=e.x>0?2.5:-2.5;C=(e.x+t)*i}if(0!==e.y)if(e.y*j<=0)j+=e.y*o;else{var t=e.y>0?2.5:-2.5;j=(e.y+t)*i}}else 0!==e.x&&(G=e.x>0?S:X,C=0),0!==e.y&&(H=e.y>0?Y:P,j=0);u(),r(E)}else Q=!1,L.dispatchEvent(new Event("momentumend"))}}var w=t.source,L=void 0===w?document:w,M=t.update,b=t.multiplier,g=void 0===b?1:b,T=t.friction,q=void 0===T?.92:T,B=t.initialValues,D=t.boundX,A=t.boundY,F=t.bounce,I=void 0===F||F;n(this,e);var S,X,Y,P,R,U,V,k,z,C,j,G=0,H=0,J=.3*g,K=!1,N=!1,O=!1,Q=!1,W=[],Z=0;!function(){if(!(L="string"==typeof L?document.querySelector(L):L))throw new Error("IMPETUS: source not found.");if(!M)throw new Error("IMPETUS: update function not defined.");B&&(B[0]&&(G=B[0]),B[1]&&(H=B[1]),u()),D&&(S=D[0],X=D[1]),A&&(Y=A[0],P=A[1]),L.addEventListener("touchstart",s),L.addEventListener("mousedown",s)}(),this.pause=function(){N=!1,O=!0},this.resume=function(){O=!1},this.setValues=function(e,t){"number"==typeof e&&(G=e),"number"==typeof t&&(H=t)},this.setMultiplier=function(e){g=e,J=.3*g},this.setBounds=function(e,t){e&&(S=e[0],X=e[1]),t&&(Y=t[0],P=t[1])};var $=240};t.exports=u;var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});